// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Rank {
  EMPEROR
  SHOGUN
  DAIMYO
  SAMURAI
  RONIN
}

model Score {
  id         String    @id @default(uuid())
  timing     String
  score      Int
  word_total Int
  key_total  Int
  word_count Int
  key_count  Int
  createdAt  DateTime? @default(now())
  User       User?     @relation(fields: [userId], references: [id])
  userId     String?
}

model User {
  id                String       @id @default(uuid())
  email             String       @unique
  password          String
  nickname          String?      @unique
  avatar            String?
  is_active         Boolean      @default(false)
  lastPasswordReset DateTime?
  last_activity     DateTime?
  createdAt         DateTime     @default(now())
  rank              Rank         @default(RONIN)
  level             Int          @default(0)
  xp                Int          @default(0)
  scores            Score[]
  BrotherHood       BrotherHood? @relation(fields: [brotherHoodId], references: [id])
  brotherHoodId     String?
}

model BrotherHood {
  id    String @id @default(uuid())
  name  String
  users User[]
}
