// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "darwin-arm64"]

}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Rank {
  EMPEROR
  SHOGUN
  DAIMYO
  SAMURAI
  RONIN
}

model Score {
  id              String    @id @default(uuid())
  timing          String
  mpm             Int
  wrong_words     Int
  correct_letters Int
  total_letters   Int
  wrong_letters   Int
  precision       Float
  points          Int
  game_mode       String
  createdAt       DateTime? @default(now())
  User            User?     @relation(fields: [userId], references: [id])
  userId          String?
}

model User {
  id                String       @id @default(uuid())
  email             String       @unique
  password          String
  nickname          String?      @unique
  avatar            String?
  is_active         Boolean      @default(false)
  lastPasswordReset DateTime?
  last_activity     DateTime?
  createdAt         DateTime     @default(now())
  rank              Rank         @default(RONIN)
  level             Int          @default(0)
  xp                Int          @default(0)
  scores            Score[]
  BrotherHood       BrotherHood? @relation(fields: [brotherHoodId], references: [id])
  brotherHoodId     String?
  didacticiel_level Int?          @default(3)
}

model WordSet {
  id                String       @id @default(uuid())
  letter            String
  level             Int
  wordSet           String[]
}

model BrotherHood {
  id    String @id @default(uuid())
  name  String
  users User[]
}
